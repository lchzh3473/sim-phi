{"version":3,"file":"tips-BizSDcdX.js","sources":["../src/plugins/tips.js"],"sourcesContent":["export default hook.define({\n  name: 'Tips',\n  description: 'Just some tips',\n  contents: [\n    {\n      type: 'script',\n      meta: [$ => fireTip($('.title'))]\n    }\n  ]\n});\nconst brain = {\n  firstTip: null,\n  tips: [],\n  addTip(content, { first = false } = {}) {\n    if (first) this.firstTip = content;\n    const weight = this.tips.reduce((acc, cur) => Math.max(acc, cur.weight), 0);\n    this.tips.push({ content, weight: weight || 1 });\n  },\n  getTip() {\n    if (this.firstTip) {\n      const tip = this.firstTip;\n      this.firstTip = null;\n      return tip;\n    }\n    if (this.tips.every(tip => tip.weight < 1)) this.tips.forEach(tip => tip.weight *= 2);\n    const total = this.tips.reduce((acc, cur) => acc + cur.weight, 0);\n    const rand = Math.random() * total;\n    let acc = 0;\n    for (const tip of this.tips) {\n      acc += tip.weight;\n      if (rand < acc) {\n        tip.weight *= 0.5;\n        return tip.content;\n      }\n    }\n    throw new Error('NoIdeaException');\n  }\n};\n// 2022.5.8\nbrain.addTip('开启tips:tips:tips:tips...', { first: true });\n// 统计类\n// brain.addTip('当您看到这里，已经使用了[时间]呢！');\n// brain.addTip('您已经刷了[次数]条tips了呢，如果累了的话可以休息一下哦！');\n// 声明类\nbrain.addTip('不提供逆向教程，也不提供谱面下载');\nbrain.addTip('反馈bug时记得带上设备以及浏览器名称和版本号！');\n// 暗示类\nbrain.addTip('用键盘打歌是怎样的体验？');\nbrain.addTip('<ruby>奥拓普雷<rp>(</rp><rt>Autoplay</rt><rp>)</rp></ruby>先生，永远的音游之光');\nbrain.addTip('上传并选择视频文件播放可以将背景替换为视频！<br><sub>(需要浏览器支持)</sub>');\nbrain.addTip('在【曲名】处输入“/pz”可以打开Phizone的对话框！');\nbrain.addTip('在【曲名】处输入“/random”以加载随机歌曲！');\nbrain.addTip('长按“播放”按钮可以打开皮肤选择器！');\n// brain.addTip('4.1 Hyperer Mode Released');\n// brain.addTip('4.1 Reverse Mode Released');\n// 闲聊类\nbrain.addTip('今天又是元气满满的一天~');\nbrain.addTip('lchz\\x68 is the best!');\nbrain.addTip('<a href=\"https://afdian.com/a/lchz\\x683\\x3473\"target=\"_blank\">我很可爱，请给我钱</a>');\n// 彩蛋类\nbrain.addTip('<b style=\"background-clip:text;-webkit-background-clip:text;color:transparent;background-image:linear-gradient(90deg,red,orange,lime,blue,magenta);width:fit-content;margin-left:auto;margin-right:auto;\">这是一条彩虹色的Tip！</b>');\nbrain.addTip('#锟斤拷锟叫凤拷锟斤拷锟脚碉拷也只锟斤拷Tips]');\nbrain.addTip('flag{\\x71w\\x71}');\nbrain.addTip('<img src=\"//wsrv.nl/?url=www.digital-typhoon.org/globe/color/1979/2048x2048/GMS179101209.globe.1.jpg\"style=\"width:50vmin;clip-path:circle(49.5%)\"/><br>1979-10-12 09:00 UTC');\n// 居然有人看源码，我就写点有意思的东西吧\nbrain.addTip('<code style=\"white-space:pre;text-align:left;display:inline-block;font-size:1.5em\">try{\\n  tip(brain.makeATip());\\n}\\ncatch(NoIdeaException e){\\n  e.printStackTrace();\\n}</code>');\nfunction fireTip(elem) {\n  /**\n   * @param {HTMLElement} elem1\n   * @param {()=>any} activeFn\n   * @param {()=>any} doneFn\n   */\n  function longPress(elem1, activeFn, doneFn, failFn) {\n    let timer = null;\n    elem1.addEventListener('mousedown', onrequest);\n    elem1.addEventListener('mouseup', oncancel);\n    elem1.addEventListener('mouseleave', oncancel);\n    elem1.addEventListener('touchstart', onrequest, { passive: true });\n    elem1.addEventListener('touchend', oncancel);\n    elem1.addEventListener('touchcancel', oncancel);\n    function onrequest() {\n      timer = requestAnimationFrame(onrequest);\n      if (activeFn()) {\n        cancelAnimationFrame(timer);\n        doneFn();\n        elem1.removeEventListener('mousedown', onrequest);\n        elem1.removeEventListener('mouseup', oncancel);\n        elem1.removeEventListener('mouseleave', oncancel);\n        elem1.removeEventListener('touchstart', onrequest);\n        elem1.removeEventListener('touchend', oncancel);\n        elem1.removeEventListener('touchcancel', oncancel);\n      }\n    }\n    function oncancel() {\n      cancelAnimationFrame(timer);\n      failFn();\n    }\n  }\n  (function helloworld() {\n    let pressTime = null;\n    longPress(elem, () => {\n      if (pressTime == null) pressTime = performance.now();\n      if (performance.now() - pressTime > 3473) return 1;\n      return 0;\n    }, () => {\n      hook.fireModal('<p>Tip</p>', `<p>${brain.getTip()}</p>`);\n      helloworld();\n    }, () => pressTime = null);\n  }());\n}\n"],"names":["tips","hook","define","name","description","contents","type","meta","$","elem","helloworld","pressTime","elem1","activeFn","doneFn","failFn","timer","onrequest","requestAnimationFrame","cancelAnimationFrame","removeEventListener","oncancel","addEventListener","passive","longPress","performance","now","fireModal","brain","getTip","fireTip","firstTip","addTip","content","first","this","weight","reduce","acc","cur","Math","max","push","tip","every","forEach","total","rand","random","Error"],"mappings":"AAAA,MAAeA,EAAAC,KAAKC,OAAO,CACzBC,KAAM,OACNC,YAAa,iBACbC,SAAU,CACR,CACEC,KAAM,SACNC,KAAM,CAACC,GA4Db,SAAiBC,IAgCf,SAAUC,IACR,IAAIC,EAAY,MA3BlB,SAAmBC,EAAOC,EAAUC,EAAQC,GAC1C,IAAIC,EAAQ,KAOZ,SAASC,IACPD,EAAQE,sBAAsBD,GAC1BJ,MACFM,qBAAqBH,GACrBF,IACAF,EAAMQ,oBAAoB,YAAaH,GACvCL,EAAMQ,oBAAoB,UAAWC,GACrCT,EAAMQ,oBAAoB,aAAcC,GACxCT,EAAMQ,oBAAoB,aAAcH,GACxCL,EAAMQ,oBAAoB,WAAYC,GACtCT,EAAMQ,oBAAoB,cAAeC,GAEjD,CACI,SAASA,IACcL,qBAAAA,GACrBD,GACN,CAtBIH,EAAMU,iBAAiB,YAAaL,GACpCL,EAAMU,iBAAiB,UAAWD,GAClCT,EAAMU,iBAAiB,aAAcD,GACrCT,EAAMU,iBAAiB,aAAcL,EAAW,CAAEM,SAAS,IAC3DX,EAAMU,iBAAiB,WAAYD,GACnCT,EAAMU,iBAAiB,cAAeD,EAkB1C,CAGIG,CAAUf,GAAM,KACG,MAAbE,IAAmBA,EAAYc,YAAYC,OAC3CD,YAAYC,MAAQf,EAAY,KAAa,EAC1C,KACN,KACIV,KAAA0B,UAAU,aAAc,MAAMC,EAAMC,gBACzCnB,GAAY,IACX,IAAMC,EAAY,MACpB,CAVH,EAWF,CAvGkBmB,CAAQtB,EAAE,gBAItBoB,EAAQ,CACZG,SAAU,KACV/B,KAAM,GACNgC,MAAAA,CAAOC,GAAWC,MAAAA,GAAQ,GAAU,CAAA,GAC9BA,IAAOC,KAAKJ,SAAWE,GAC3B,MAAMG,EAASD,KAAKnC,KAAKqC,QAAO,CAACC,EAAKC,IAAQC,KAAKC,IAAIH,EAAKC,EAAIH,SAAS,GACpED,KAAAnC,KAAK0C,KAAK,CAAET,QAAAA,EAASG,OAAQA,GAAU,GAC7C,EACDP,MAAAA,GACE,GAAIM,KAAKJ,SAAU,CACjB,MAAMY,EAAMR,KAAKJ,SACjB,OAAAI,KAAKJ,SAAW,KACTY,CACb,CACQR,KAAKnC,KAAK4C,OAAMD,GAAOA,EAAIP,OAAS,KAAID,KAAKnC,KAAK6C,SAAQF,GAAOA,EAAIP,QAAU,IACnF,MAAMU,EAAQX,KAAKnC,KAAKqC,QAAO,CAACC,EAAKC,IAAQD,EAAMC,EAAIH,QAAQ,GACzDW,EAAOP,KAAKQ,SAAWF,EAC7B,IAAIR,EAAM,EACV,IAAA,MAAWK,KAAOR,KAAKnC,KACrBsC,GAAAA,GAAOK,EAAIP,OACPW,EAAOT,EACTK,OAAAA,EAAIP,QAAU,GACPO,EAAIV,QAGT,MAAA,IAAIgB,MAAM,kBACpB,GAGArB,EAAMI,OAAO,2BAA4B,CAAEE,OAAO,IAKlDN,EAAMI,OAAO,oBACbJ,EAAMI,OAAO,4BAEbJ,EAAMI,OAAO,gBACbJ,EAAMI,OAAO,oEACbJ,EAAMI,OAAO,kDACbJ,EAAMI,OAAO,iCACbJ,EAAMI,OAAO,6BACbJ,EAAMI,OAAO,sBAIbJ,EAAMI,OAAO,gBACbJ,EAAMI,OAAO,sBACbJ,EAAMI,OAAO,yEAEbJ,EAAMI,OAAO,8NACbJ,EAAMI,OAAO,6BACbJ,EAAMI,OAAO,aACbJ,EAAMI,OAAO,+KAEbJ,EAAMI,OAAO"}